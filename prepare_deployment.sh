#!/bin/bash
# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð¿Ð¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð¾Ð² Ðº Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸ÑŽ

echo "ðŸš€ ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð´Ð»Ñ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ..."

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð¿Ð°Ð¿ÐºÑƒ Ð´Ð»Ñ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ
mkdir -p deployment_package
cd deployment_package

# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
echo "ðŸ“ ÐšÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð¾Ð²..."
cp -r ../backend ./
cp -r ../frontend ./
cp ../README_DEPLOYMENT.md ./
cp ../SUPABASE_SETUP_GUIDE.md ./
cp ../HOSTING_GUIDE_RU.md ./
cp ../QUICK_START.md ./

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð» Ñ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ð°
echo "ðŸ”§ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ„Ð°Ð¹Ð»Ð° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ..."
cat > deployment_env.txt << 'EOF'
# ÐŸÐ•Ð Ð•ÐœÐ•ÐÐÐ«Ð• ÐžÐšÐ Ð£Ð–Ð•ÐÐ˜Ð¯ Ð”Ð›Ð¯ Ð¥ÐžÐ¡Ð¢Ð˜ÐÐ“Ð

## Backend Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ (.env Ð² Ð¿Ð°Ð¿ÐºÐµ backend/):
SUPABASE_URL=https://kykzqxoxgcwqurnceslu.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt5a3pxeG94Z2N3cXVybmNlc2x1Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MTQ4NzI0OCwiZXhwIjoyMDY3MDYzMjQ4fQ.wZcC233qDjrIuXn4it1j-YnxHak14v8GqxCCuW6VIb4
SECRET_KEY=uroki-islama-secret-key-2024
USE_POSTGRES=false

## Frontend Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ (.env Ð² Ð¿Ð°Ð¿ÐºÐµ frontend/):
REACT_APP_BACKEND_URL=https://Ð’ÐÐ¨_Ð”ÐžÐœÐ•Ð.ru

## Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ (Ð´Ð»Ñ Ð¿Ð°Ð½ÐµÐ»Ð¸ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ð°):
PYTHON_VERSION=3.11
NODE_VERSION=18
EOF

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð³Ð»Ð°Ð²Ð½ÑƒÑŽ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑŽ
cat > README.md << 'EOF'
# ðŸ•Œ Ð˜ÑÐ»Ð°Ð¼ÑÐºÐ¸Ð¹ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ñ€Ñ‚Ð°Ð» "Ð£Ñ€Ð¾ÐºÐ¸ Ð˜ÑÐ»Ð°Ð¼Ð°"

## ðŸ“¦ ÐŸÐ°ÐºÐµÑ‚ Ð´Ð»Ñ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð½Ð° Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ðµ

Ð­Ñ‚Ð¾ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð¿Ð°ÐºÐµÑ‚ Ð´Ð»Ñ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¿Ð¾Ð»Ð½Ð¾Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¸ÑÐ»Ð°Ð¼ÑÐºÐ¾Ð³Ð¾ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾Ð³Ð¾ Ð¿Ð¾Ñ€Ñ‚Ð°Ð»Ð° Ð½Ð° Ñ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¾Ð¼ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ðµ.

### ðŸŒŸ Ð§Ñ‚Ð¾ ÑƒÐ¶Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¾:
- âœ… **3 ÐºÑƒÑ€ÑÐ°** Ð¿Ð¾ Ð¾ÑÐ½Ð¾Ð²Ð°Ð¼ Ð˜ÑÐ»Ð°Ð¼Ð°
- âœ… **ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹**
- âœ… **Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ**
- âœ… **Ð’Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¸ Ð¾Ñ‚Ð²ÐµÑ‚Ñ‹ Ð¸Ð¼Ð°Ð¼Ñƒ**
- âœ… **ÐÐ´Ð¼Ð¸Ð½ÑÐºÐ°Ñ Ð¿Ð°Ð½ÐµÐ»ÑŒ**
- âœ… **ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð¾Ð±Ð»Ð°Ñ‡Ð½Ð¾Ð¹ Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…**

### ðŸ“š Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ:

1. **QUICK_START.md** - Ð‘Ñ‹ÑÑ‚Ñ€Ð¾Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð·Ð° 15 Ð¼Ð¸Ð½ÑƒÑ‚ âš¡
2. **HOSTING_GUIDE_RU.md** - ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ñ€Ð¾ÑÑÐ¸Ð¹ÑÐºÐ¸Ñ… Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ð¾Ð² ðŸ‡·ðŸ‡º
3. **deployment_env.txt** - ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð´Ð»Ñ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ðŸ”§
4. **README_DEPLOYMENT.md** - Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ ðŸ“–

### ðŸš€ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚:

1. **Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹** Ð½Ð° Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³ (Timeweb, Beget, Reg.ru)
2. **Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ** Ð¸Ð· `deployment_env.txt`
3. **Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸:**
   ```bash
   cd backend && pip install -r requirements.txt
   cd frontend && npm install && npm run build
   ```
4. **Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ backend:**
   ```bash
   uvicorn server:app --host 0.0.0.0 --port 8000
   ```

### ðŸ”‘ ÐÐ´Ð¼Ð¸Ð½ Ð´Ð¾ÑÑ‚ÑƒÐ¿:
- **Email:** admin@uroki-islama.ru
- **ÐŸÐ°Ñ€Ð¾Ð»ÑŒ:** admin123

### ðŸ’¾ Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…:
Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ **Supabase** (Ð¾Ð±Ð»Ð°Ñ‡Ð½Ð°Ñ PostgreSQL) - Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ð¿Ð¾ÑÑ‚Ð¾ÑÐ½Ð½Ð¾ Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹ Ñ Ð»ÑŽÐ±Ð¾Ð³Ð¾ Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ð°.

### ðŸ“ž ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ°:
Ð•ÑÐ»Ð¸ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ»Ð¸ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ - Ñ‡Ð¸Ñ‚Ð°Ð¹Ñ‚Ðµ `HOSTING_GUIDE_RU.md` Ñ Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ñ‹Ð¼Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼Ð¸.

**ðŸŽ‰ Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑÐ¾Ð·Ð´Ð°ÑÑ‚ Ð²ÑÐµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð·Ð°Ð¿ÑƒÑÐºÐµ!**
EOF

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð°Ñ€Ñ…Ð¸Ð² Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸
echo "ðŸ“¦ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð°Ñ€Ñ…Ð¸Ð²Ð° Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸..."
tar -czf ../uroki_islama_deployment.tar.gz .

cd ..
echo ""
echo "âœ… Ð¤Ð°Ð¹Ð»Ñ‹ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ðº Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸ÑŽ!"
echo "ðŸ“¦ ÐÑ€Ñ…Ð¸Ð² ÑÐ¾Ð·Ð´Ð°Ð½: uroki_islama_deployment.tar.gz"
echo ""
echo "ðŸ“‹ Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð´Ð°Ð»ÑŒÑˆÐµ:"
echo "1. Ð¡ÐºÐ°Ñ‡Ð°Ð¹Ñ‚Ðµ Ð°Ñ€Ñ…Ð¸Ð² uroki_islama_deployment.tar.gz"
echo "2. Ð—Ð°Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð¸Ñ€ÑƒÐ¹Ñ‚ÐµÑÑŒ Ð½Ð° Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³Ðµ (Timeweb, Beget, Ð¸ Ñ‚.Ð´.)"
echo "3. Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚Ðµ Ð°Ñ€Ñ…Ð¸Ð² Ð½Ð° Ñ…Ð¾ÑÑ‚Ð¸Ð½Ð³ Ð¸ Ð¸Ð·Ð²Ð»ÐµÐºÐ¸Ñ‚Ðµ"
echo "4. Ð¡Ð»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼ Ð² QUICK_START.md (Ð±Ñ‹ÑÑ‚Ñ€Ð¾) Ð¸Ð»Ð¸ HOSTING_GUIDE_RU.md (Ð¿Ð¾Ð´Ñ€Ð¾Ð±Ð½Ð¾)"
echo ""
echo "ðŸ”‘ ÐÐ´Ð¼Ð¸Ð½ Ð´Ð¾ÑÑ‚ÑƒÐ¿:"
echo "   Email: admin@uroki-islama.ru"
echo "   ÐŸÐ°Ñ€Ð¾Ð»ÑŒ: admin123"